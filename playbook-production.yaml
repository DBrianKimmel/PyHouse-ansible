# Name:    PyHouse-ansible/playbook-production.yaml
# Author:  D. Brian Kimmel
# Created: 2018-04-19
# Updated: 2018-04-19
#
# This is the top level playbook for production computers.
# This playbook is a dispatcher.

---

- name: Playbook (Production)
  hosts:            all
  strategy:         linear
  gather_facts:     yes

# Install ansible on the admin machine.
  - name: Admin - Set up ansible on the ansible admin computers.
    set_fact: flag_ansible "True"
    tags: setup_ansible

  - name: Debug
    debug: msg="Flag Settings {{ ansible_local }}"


# Now define the plays

# Now get the proper Production playbook(s)
- import_playbook: "./playbooks/production-pis.yaml"
#  when:
#  - tag_production is defined

- import_playbook: "./playbooks/production-nucs.yaml"
#  when:
#  - tag_production is defined

- import_playbook: "./playbooks/production-others.yaml"
#  when:
#  - tag_production is defined

### END DBK
