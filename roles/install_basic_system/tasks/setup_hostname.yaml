# Name:    roles/install_base_system/tasks/setup_hostname.yaml
# Updated: 2020-10-12
#
# Set up the computer's hostname
#
---

- name: SetupHostname Task-01 - main info for debugging the role.
  debug:
    msg:
      - "      Lsb: {{ ansible_lsb | default('test_default_token') }}"
      - "     User: {{ admin_user_name | default('test_default_token') }}"
      - "     Dist: {{ ansible_os_family | default('test_default_token') }}"
      - "     Host: {{ hostname_hostname | default('test_default_token') }}"
      - "     Role: {{ pyh_roles | default('test_default_token') }}"
      - "  Gateway: {{ gateway_router | default('test_default_totken') }}"
      - "Host Role: {{ host_roles | default('test_default_totken') }}"

- name: SetupHostname Task-02 - Update /etc/hostname
  hostname:
    name: "{{ hostname_hostname }}"
    # use: debian

- name: SetupHostname Task-03 - Update the IPv4 hostname (pt. 3) - (/etc/hosts)
  lineinfile:
    dest: /etc/hosts
    regexp: "^127.0.1.1"
    line: "127.0.1.1{{'\t'}}{{ hostname_hostname }}{% if hostname_domain != '' %}{{'\t'}}{{ hostname_hostname }}.{{ hostname_domain }}{% endif %}{{'\t'}}localhost"
    state:      present
  tags: hostname

### END DBK
