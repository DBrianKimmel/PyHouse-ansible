#!/bin/bash
# Name:    PyHouse-ansible/bin/ansible-production
# Author:  D. Brian Kimmel
# Created: 2017-11-05
# Updated: 2017-11-12
#
# Run ansible to set up a new raspberry pi.
# Works with raspbian stretch and possibly later.
#
# Edit the file !/workspace/PyHouse-ansible/host_vars/pi-setup.yaml and put in the new IP address

INVENTORY=" -i inventories/production/hosts"
PLAYBOOK=" playbook.yaml"
PSWD1=" --vault-password-file ~/.vault-pass.txt"
TAGS=""
# PSWD2=" --ask-vault-pass"
# SYNTAX=" --syntax-check"
# TAGS=" --tags=fetch-files"

if [ $# -gt 0 ]; then
    TAGS=" --tags=$1"
    echo "Tags = ${TAGS}"
fi

cd ~/workspace/PyHouse-ansible
ansible-playbook ${INVENTORY} ${PLAYBOOK} ${PSWD1}  ${TAGS}

### END DBK
